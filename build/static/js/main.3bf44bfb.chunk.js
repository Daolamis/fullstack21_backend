(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),a=t(15),i=t.n(a),u=t(6),o=t(3),d=t(0),l=function(e){var n=e.filter,t=e.handleFilter;return Object(d.jsxs)("div",{children:["filter shown with ",Object(d.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.notification;if(!n)return null;var t=n.isError?"error":"info";return Object(d.jsx)("div",{className:t,children:n.msg})},j=function(e){var n=e.newName,t=e.handleNewName,r=e.newNumber,c=e.handleNewNumber,a=e.handleSubmit;return Object(d.jsxs)("form",{onSubmit:a,children:[Object(d.jsx)("h3",{children:"Add a new"}),Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:n,onChange:t})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:r,onChange:c})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{children:"add"})})]})},b=function(e){var n=e.person,t=e.handleDelete;return Object(d.jsxs)("div",{children:[n.name," ",n.number,Object(d.jsx)("button",{onClick:t,children:"delete"})]})},f=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return Object(d.jsx)(b,{person:e,handleDelete:function(){return t(e)}},e.name)}))},h=t(4),m=t.n(h),O="/api/persons",p=function(){return m.a.get(O).then((function(e){return e.data}))},v=function(e){return m.a.post(O,e).then((function(e){return e.data}))},x=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=function(e){return m.a.put("".concat(O,"/").concat(e.id),e).then((function(e){return e.data}))},N=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),b=i[0],h=i[1],m=Object(r.useState)(""),O=Object(o.a)(m,2),N=O[0],g=O[1],S=Object(r.useState)(""),C=Object(o.a)(S,2),D=C[0],k=C[1],E=Object(r.useState)(null),y=Object(o.a)(E,2),A=y[0],F=y[1];Object(r.useEffect)((function(){p().then((function(e){c(e)}))}),[]);var I=function(e,n){F({msg:e,isError:n}),setTimeout((function(){F(null)}),5e3)};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(s,{notification:A}),Object(d.jsx)(l,{filter:D,handleFilter:function(e){k(e.target.value)}}),Object(d.jsx)(j,{newName:b,handleNewName:function(e){h(e.target.value)},newNumber:N,handleNewNumber:function(e){g(e.target.value)},handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===b}));n?window.confirm("".concat(b," is already added to phonebook, replace the old number with a new number"))&&w(Object(u.a)(Object(u.a)({},n),{},{number:N})).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),h(""),g(""),I("Changed ".concat(e.name," phonenumber"),!1)})):v({name:b,number:N}).then((function(e){c(t.concat(e)),h(""),g(""),I("Added ".concat(e.name),!1)})).catch((function(e){return I(e.response.data.error,!0)}))}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(f,{persons:D?t.filter((function(e){return-1!==e.name.toUpperCase().indexOf(D.toUpperCase())})):t,handleDelete:function(e){window.confirm("Delete ".concat(e.name))&&x(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),I("Deleted ".concat(e.name),!1)})).catch((function(){I("Information of ".concat(e.name," was already removed from server"),!0)}))}})]})};t(39);i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(N,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3bf44bfb.chunk.js.map